{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst tHead = document.querySelector('thead');\nconst tHeadRow = tHead.querySelector('tr');\nconst tBody = document.querySelector('tbody');\nconst form = createForm();\n\ndocument.body.append(form);\n\ntHeadRow.addEventListener('click', sorting);\n\ntBody.addEventListener('click', activateRow);\ntBody.addEventListener('dblclick', handlerDblClick);\n\nform.addEventListener('submit', handlerSubmit);\n\nfunction handlerDblClick(e) {\n  const targetCell = e.target.closest('td');\n\n  if (!targetCell) {\n    // eslint-disable-next-line\n    return;\n  }\n\n  const value = targetCell.innerText;\n\n  const cellInput = document.createElement('input');\n\n  cellInput.className = 'cell-input';\n  cellInput.autofocus = true;\n  cellInput.dataset.oldValue = value;\n  cellInput.value = value;\n\n  if (!targetCell.nextElementSibling) {\n    cellInput.type = 'number';\n    cellInput.value = parseFloat(value.slice(1).replace(/,/g, ''));\n  }\n\n  targetCell.innerText = '';\n  targetCell.insertAdjacentElement('beforeend', cellInput);\n\n  cellInput.addEventListener('blur', handlerBlur);\n  cellInput.addEventListener('keypress', handlerKeypress);\n}\n\nfunction handlerBlur(e) {\n  const input = e.target;\n\n  const message = cellValid(input);\n\n  showMessage(message);\n\n  if (message.type === 'error' || message.type === 'warning') {\n    input.focus();\n\n    return;\n  }\n\n  saveCellValue(input);\n}\n\nfunction handlerKeypress(e) {\n  const key = e.key;\n\n  if (key !== 'Enter') {\n    return;\n  }\n\n  const input = e.target;\n\n  const message = cellValid(input);\n\n  showMessage(message);\n\n  if (message.type === 'error' || message.type === 'warning') {\n    return;\n  }\n\n  saveCellValue(input);\n}\n\nfunction saveCellValue(input) {\n  let newValue = input.value;\n  const targetCell = input.closest('td');\n\n\n  if (!targetCell.nextElementSibling) {\n    newValue = `$${parseFloat(newValue).toLocaleString('en-EN')}`;\n  }\n\n  targetCell.innerText = newValue;\n  input.remove();\n}\n\nfunction cellValid(input) {\n  const row = input.closest('tr');\n  const arrOfCell = [...row.querySelectorAll('td')];\n  const currentIndex = arrOfCell.findIndex((cell) => {\n    return cell.firstChild === input;\n  });\n\n  const value = input.value;\n\n  if (value.length === 0) {\n    return {\n      type: 'warning',\n      text: 'Cell can not be empty',\n    };\n  }\n\n  if (currentIndex === 0 && value.length < 4) {\n    return {\n      type: 'warning',\n      text: 'Name can not be less then 4 letters',\n    };\n  } else if (currentIndex === 3 && +value < 18) {\n    return { type: 'warning', text: 'Age can not be less then 18' };\n  } else if (currentIndex === 3 && +value > 90) {\n    return { type: 'warning', text: 'Age can not be bigger then 90' };\n  }\n\n  return { type: 'success', text: 'User updated successfully' };\n}\n\nfunction handlerSubmit(e) {\n  e.preventDefault();\n\n  const row = document.createElement('tr');\n\n  const message = validation(form);\n\n  showMessage(message);\n\n  if (message.type === 'error') {\n    return;\n  }\n\n  const salary = +e.target['salary'].value;\n\n\n  const values = [\n    e.target['name'].value,\n    e.target['position'].value,\n    e.target['office'].value,\n    e.target['age'].value,\n    `$${salary.toLocaleString('en-EN')}`,\n  ];\n\n  for (const value of values) {\n    const cell = document.createElement('td');\n\n    cell.insertAdjacentText('beforeend', value);\n\n    row.insertAdjacentElement('beforeend', cell);\n  }\n\n  tBody.insertAdjacentElement('beforeend', row);\n\n  form.reset();\n}\n\nfunction showMessage(message) {\n  const newNotificationBlock = document.createElement('div');\n  const oldNotificationBlock = document.querySelector('.notification');\n\n  if (oldNotificationBlock) {\n    oldNotificationBlock.remove();\n  }\n\n  const title = document.createElement('h1');\n  const text = document.createElement('p');\n\n  if (!newNotificationBlock.className) {\n    newNotificationBlock.className = 'notification';\n    newNotificationBlock.dataset.qa = 'notification';\n  }\n\n  switch (message.type) {\n    case 'error':\n      title.innerText = 'ERROR';\n      newNotificationBlock.classList.add('error');\n      break;\n\n    case 'warning':\n      title.innerText = 'ERROR';\n      newNotificationBlock.classList.add('error');\n      break;\n\n    default:\n      title.innerText = 'SUCCESS';\n      newNotificationBlock.classList.add('success');\n      break;\n  }\n\n  text.innerText = message.text;\n\n  newNotificationBlock.insertAdjacentElement('afterbegin', title);\n  newNotificationBlock.insertAdjacentElement('beforeend', text);\n\n  document.body.append(newNotificationBlock);\n\n  window.setTimeout(() => {\n    newNotificationBlock.remove();\n  }, 5000);\n}\n\nfunction activateRow(e) {\n  const arrOfRows = [...tBody.querySelectorAll('tr')];\n\n  arrOfRows.forEach((row) => {\n    row.className = '';\n  });\n\n  e.target.closest('tr').className = 'active';\n}\n\nfunction sorting(e) {\n  const arrOfTitleCells = [...tHeadRow.querySelectorAll('th')];\n\n  const sortIndex = arrOfTitleCells.indexOf(e.target);\n\n  if (sortIndex === -1) {\n    // eslint-disable-next-line\n    return;\n  }\n\n  const isDesc = e.target.dataset.isDesc === '';\n\n  const arrOfRows = [...tBody.querySelectorAll('tr')];\n\n  arrOfRows.sort((row1, row2) => {\n    let cellValue1 = [...row1.querySelectorAll('td')][sortIndex].textContent;\n    let cellValue2 = [...row2.querySelectorAll('td')][sortIndex].textContent;\n\n    if (cellValue1.startsWith('$')) {\n      cellValue1 = parseFloat(cellValue1.slice(1));\n      cellValue2 = parseFloat(cellValue2.slice(1));\n    }\n\n    if (parseFloat(cellValue1)) {\n      cellValue1 = parseFloat(cellValue1);\n      cellValue2 = parseFloat(cellValue2);\n    }\n\n    switch (typeof cellValue1) {\n      case 'string':\n        if (isDesc) {\n          return cellValue2.localeCompare(cellValue1);\n        }\n\n        return cellValue1.localeCompare(cellValue2);\n\n      default:\n        if (isDesc) {\n          return cellValue2 - cellValue1;\n        }\n\n        return cellValue1 - cellValue2;\n    }\n  });\n\n  arrOfRows.forEach((row) => {\n    tBody.append(row);\n  });\n\n  e.target.toggleAttribute('data-is-desc');\n}\n\nfunction createForm() {\n  const newForm = document.createElement('form');\n\n  newForm.className = 'new-employee-form';\n\n  const labelName = createInput('name');\n  const labelPosition = createInput('position');\n  const labelAge = createInput('age', 'number');\n  const labelSalary = createInput('salary', 'number');\n  const select = createSelect('office');\n  const button = createButton();\n\n  newForm.insertAdjacentElement('beforeend', labelName);\n  newForm.insertAdjacentElement('beforeend', labelPosition);\n  newForm.insertAdjacentElement('beforeend', select);\n  newForm.insertAdjacentElement('beforeend', labelAge);\n  newForm.insertAdjacentElement('beforeend', labelSalary);\n  newForm.insertAdjacentElement('beforeend', button);\n\n  return newForm;\n}\n\nfunction createInput(nameInput, type = 'test') {\n  const label = document.createElement('label');\n  const input = document.createElement('input');\n\n  const nameLabel = capitalizeFirstLetter(nameInput);\n\n  input.name = nameInput;\n  input.type = type;\n  input.dataset.qa = nameInput;\n  input.required = false;\n\n  label.insertAdjacentText('afterbegin', `${nameLabel}`);\n  label.insertAdjacentElement('beforeend', input);\n\n  return label;\n}\n\nfunction createSelect(nameSelect) {\n  const labelSelect = document.createElement('label');\n  const select = document.createElement('select');\n\n  select.name = nameSelect;\n  select.dataset.qa = 'office';\n\n  const labelText = capitalizeFirstLetter(nameSelect);\n\n  labelSelect.insertAdjacentText('afterbegin', labelText);\n\n  const options = [\n    `Tokyo`,\n    `Singapore`,\n    `London`,\n    `New York`,\n    `Edinburgh`,\n    `San Francisco`,\n  ].map((city) => {\n    const option = document.createElement('option');\n\n    option.value = city;\n    option.insertAdjacentText('beforeend', city);\n\n    return option;\n  });\n\n  options.forEach((option) => {\n    select.insertAdjacentElement('beforeend', option);\n  });\n\n  labelSelect.insertAdjacentElement('beforeend', select);\n\n  return labelSelect;\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction createButton() {\n  const button = document.createElement('button');\n\n  button.type = 'submit';\n\n  button.insertAdjacentText('beforeend', 'Save to table');\n\n  return button;\n}\n\nfunction validation(formForValid) {\n  const nameValue = formForValid['name'].value;\n  const age = +formForValid['age'].value;\n  const position = formForValid['position'].value;\n  const office = formForValid['office'].value;\n  const salary = formForValid['salary'].value;\n\n  if (position === '' || office === '' || salary === '') {\n    return { type: 'error', text: 'All fields must be filled in' };\n  }\n\n  if (nameValue.length < 4) {\n    return { type: 'error', text: 'Name can not be less then 4 letters' };\n  }\n\n  if (age < 18) {\n    return { type: 'error', text: 'Age can not be less then 18' };\n  }\n\n  if (age > 90) {\n    return { type: 'error', text: 'Age can not be bigger then 90' };\n  }\n\n  return { type: 'success', text: 'User added successfully' };\n}\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}